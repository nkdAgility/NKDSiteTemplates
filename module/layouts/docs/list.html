{{- define "main" }}
  <div class="container-fluid py-4">
    <div class="container content-docs">
      <div class="row">
        {{/* Sidebar */}}
        <div class="col-xs-12 col-md-3 docs-navbar-container">
          {{ partial "docs/sidebar.html" . }}
        </div>

        {{/* Main content */}}
        <div class="col-lg-9 col-xl-9">
          <div class="docs-content">
            {{/* Page title */}}
            <div class="docs-header mb-4">
              <h1 class="docs-title">{{ .Title }}</h1>
              {{ if .Params.description }}
                <p class="docs-description text-muted">{{ .Params.description }}</p>
              {{ else if .Content }}
                <div class="docs-description">{{ .Content }}</div>
              {{ end }}
            </div>

            {{/* Documentation sections */}}
            {{ if .Pages }}
              <div class="docs-sections">
                <div class="row">
                  {{ range .Pages.ByWeight.ByTitle }}
                    <div class="col-md-6 col-lg-4 mb-4">
                      <div class="card h-100 docs-section-card">
                        <div class="card-body">
                          <h5 class="card-title">
                            <a href="{{ .RelPermalink }}" class="text-decoration-none">
                              <i class="fas fa-folder-open me-2 text-primary"></i>
                              {{ .Title }}
                            </a>
                          </h5>
                          {{ if .Params.description }}
                            <p class="card-text text-muted">{{ .Params.description }}</p>
                          {{ else if .Summary }}
                            <p class="card-text text-muted">{{ .Summary }}</p>
                          {{ end }}

                          {{/* Show child pages count */}}
                          {{ if .Pages }}
                            <small class="text-muted">
                              <i class="fas fa-file-alt me-1"></i>
                              {{ len .Pages }} {{ if eq (len .Pages) 1 }}page{{ else }}pages{{ end }}
                            </small>
                          {{ end }}
                        </div>

                        {{/* Show first few child pages */}}
                        {{ if .Pages }}
                          <div class="card-footer bg-transparent">
                            <small class="text-muted">
                              {{ range first 3 .Pages.ByWeight.ByTitle }}
                                <a href="{{ .RelPermalink }}" class="d-block text-decoration-none mb-1">
                                  <i class="fas fa-file-alt me-1"></i>
                                  {{ .Title }}
                                </a>
                              {{ end }}
                              {{ if gt (len .Pages) 3 }}
                                <span class="text-muted">... and {{ sub (len .Pages) 3 }} more</span>
                              {{ end }}
                            </small>
                          </div>
                        {{ end }}
                      </div>
                    </div>
                  {{ end }}
                </div>
              </div>
            {{ end }}

            {{/* Getting started section */}}
            {{ $gettingStarted := .Site.GetPage "/docs/getstarted" }}
            {{ if $gettingStarted }}
              <div class="docs-getting-started mt-5">
                <div class="alert alert-primary" role="alert">
                  <h4 class="alert-heading">
                    <i class="fas fa-rocket me-2"></i>
                    Getting Started
                  </h4>
                  <p class="mb-3">New to the Azure DevOps Migration Tools? Start here for a quick introduction and setup guide.</p>
                  <a href="{{ $gettingStarted.RelPermalink }}" class="btn btn-primary">
                    <i class="fas fa-play me-2"></i>
                    Get Started
                  </a>
                </div>
              </div>
            {{ end }}
          </div>
        </div>
      </div>
    </div>
  </div>

  {{/* Mobile sidebar toggle */}}
  <div class="d-lg-none">
    <button class="btn btn-outline-primary btn-sm position-fixed" type="button" data-bs-toggle="offcanvas" data-bs-target="#docsSidebarMobile" style="top: 80px; left: 10px; z-index: 1020;">
      <i class="fas fa-bars"></i>
      <span class="visually-hidden">Toggle navigation</span>
    </button>

    <div class="offcanvas offcanvas-start" tabindex="-1" id="docsSidebarMobile">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title">Documentation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
      </div>
      <div class="offcanvas-body">
        {{ partial "docs/sidebar.html" . }}
      </div>
    </div>
  </div>
{{- end }}

{{- define "template" }}
  docs/list.html
{{- end }}
